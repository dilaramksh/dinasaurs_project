{% extends 'student/student_base.html' %}
{% load static %}

{% block title %}View Society Members{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow">
                <div class="card-header bg-warning text-white text-center">
                    <h4>Society Members</h4>
                    <p class="mb-0">View all members of your society.</p>
                </div>

                <div class="card-body">
                    <!-- Search Bar -->
                    <div class="mb-3">
                        <input type="text" id="searchInput" class="form-control" placeholder="Search members...">
                    </div>

                    <!-- Members Table -->
                    <table class="table table-hover">
                        <thead class="table-warning">
                            <tr>
                                <th scope="col">Name</th>
                                <th scope="col">Email</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            {% for user in users %}
                            <tr>
                            <!--<td>
                                    <img src="{{ user.profile_picture.url }}" alt="Profile Picture" class="rounded-circle" width="40" height="40">
                                </td>
                            -->
                                <td>{{ user.full_name }}</td>
                                <td>{{ user.email }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4" class="text-center text-muted">No users found.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- JavaScript for Filtering -->
<script>
    document.getElementById("searchInput").addEventListener("keyup", function () {
        let filter = this.value.toLowerCase();
        let rows = document.querySelectorAll("#usersTable tr");
        
        rows.forEach(row => {
            let name = row.cells[1]?.textContent.toLowerCase();
            row.style.display = name.includes(filter) ? "" : "none";
        });
    });
</script>
{% endblock %}
