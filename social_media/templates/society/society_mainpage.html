{% extends 'base_content.html' %}
{% load static %}

{% block title %}Society Mainpage{% endblock %}
{% block extra_head %}
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: {{ society_colour1 }} !important;
        }
        .container {
            min-height: 100vh;
        }
    </style>
{% endblock %}


{% block content %}
    <body>
        {% if is_committee_member %}
        <div class="position-absolute position-absolute-toggle d-flex align-items-center">
            <span id="dashboardLabel" class="me-2 toggle-label">Dashboard</span>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="viewToggle"
                    {% if request.path == society_mainpage_url %}checked{% endif %}>
            </div>
            <span id="publicPageLabel" class="ms-2 toggle-label">Public Page</span>
        </div>
        {% endif %}
        

        <header style="position: relative; width: 100%; overflow: hidden;">
            <!-- Society Banner -->
            <!-- to be customisable as well as text colour -->
            <div class="banner-image" style="background-image: url('{{ society.banner_image|default:'https://placehold.co/1920x400' }}'); height: 275px; width: 100%; background-size: cover; background-position: center;">
                <!-- Society Name Positioned at Bottom Left -->
                <div class="society-name" style="position: absolute; bottom: 10px; left: 10px; color: white; font-size: 30px; font-weight: bold;">
                    {{ society.name }}
                </div>
     

            </div>
        </header>
        <!-- navbar colour to be replaced with society colour1/colour2-->
        <!-- one-page website style, navbar jumps to section via anchor tags-->
        <nav class="navbar navbar-expand-lg navbar-light bg-white" style="padding: 10px 15px; ">
            <div class="container-fluid">
                <!-- Society Logo -->
                <a class="navbar-brand" href="#">
                    <img src="{{ user.gravatar|default:'https://via.placeholder.com/120/000000/FFFFFF?text=User' }}"
                         class="img-fluid rounded-circle mb-0"
                         alt="Profile Picture"
                         style="height: 50px; width: 50px;">
                </a>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="#about" style="font-size: 16px; font-style: normal; color: black;">
                                About
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#committee" style="font-size: 16px; font-style: normal; color: black;">
                                Meet the Committee
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#events" style="font-size: 16px; font-style: normal; color: black;">
                                Events
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Sections-->
        <section id="about" style="height: 100vh; padding: 20px; color: white;">
            <h1>About</h1>
            <p>{{ society.description }}</p>
        </section>

        <section id="committee" style="height: 100vh; padding: 20px; color: white;">
            <h1>Meet the Committee</h1>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                {% for member in committee_members %}
                <div style="text-align: center; padding: 10px; border: 1px solid #ddd; border-radius: 10px;">
                    <strong>{{ member.membership_set.first.society_role.role_name }}</strong><br>
                    <img src="https://www.gravatar.com/avatar/{{ member.gravatar_hash }}?s=100&d=identicon" 
                        alt="Profile Picture" class="gravatar" width="30" height="30" style="border-radius: 50%; margin: 10px 0;">
                    <p>{{ member.get_full_name }}</p>
                </div>
                {% empty %}
                <p>No committee members found.</p>
                {% endfor %}
            </div>
        </section>

        <section id="events" style="height: 100vh; padding: 20px; color: white;">
            <h1>Events</h1>
            <ul>
                {% for event in society_events %}
                <li>{{ event.name }} - {{ event.date }}</li>
                {% empty %}
                <p>No events available.</p>
                {% endfor %}
            </ul>
        </section>
    </body>
{% endblock %}
